{
  "$id": "h...",
  "$schema": "https://json-schema.org/draft-07/schema",
  "definitions": {
    "corridorSpecifications": {
      "$ref": "aind-vr-foraging-common.json#/definitions/visualCorridor"
    },
    "siteLabel": {
      "enum": [
        "Unspecified",
        "Gap",
        "InterPatch",
        "Reward"
      ],
      "type": "string"
    },
    "virtualSite": {
      "$ref": "aind-vr-foraging-common.json#/definitions/virtualSite"
    }
  },
  "properties": {
    "environmentStatistics": {
      "properties": {
        "patches": {
          "default": [],
          "items": {
            "$ref": "aind-vr-foraging-common.json#/definitions/patchStatistics"
          },
          "type": "array"
        },
        "transitionMatrix": {
          "$ref": "aind-vr-foraging-common.json#/definitions/matrix2d"
        }
      },
      "type": "object"
    },
    "hardware": {
      "properties": {
        "auxiliaryCamera0": {
          "$ref": "aind-vr-foraging-hardware.json#/definitions/videoCaptureDevice"
        },
        "auxiliaryCamera1": {
          "$ref": "aind-vr-foraging-hardware.json#/definitions/videoCaptureDevice"
        },
        "harpBehaviorBoard": {
          "$ref": "aind-vr-foraging-hardware.json#/definitions/harpBoard"
        },
        "mainCamera": {
          "$ref": "aind-vr-foraging-hardware.json#/definitions/spinnakerCamera"
        },
        "screen": {
          "$ref": "aind-vr-foraging-common.json#/definitions/renderingSettings"
        },
        "speaker": {
          "$ref": "aind-vr-foraging-hardware.json#/definitions/pwmBuzzer"
        },
        "treadmill": {
          "$ref": "aind-vr-foraging-hardware.json#/definitions/treadmill"
        },
        "valves": {
          "properties": {
            "odor1": {
              "$ref": "aind-vr-foraging-hardware.json#/definitions/valve"
            },
            "odor2": {
              "$ref": "aind-vr-foraging-hardware.json#/definitions/valve"
            },
            "water": {
              "$ref": "aind-vr-foraging-hardware.json#/definitions/valve"
            }
          },
          "required": [
            "water",
            "odor1",
            "odor2"
          ],
          "type": "object"
        }
      },
      "type": "object"
    },
    "metadata": {
      "properties": {
        "commitHash": {
          "default": null,
          "type": [
            "null",
            "string"
          ]
        },
        "experiment": {
          "type": "string"
        },
        "notes": {
          "default": "",
          "type": "string"
        },
        "rngSeed": {
          "type": [
            "null",
            "number"
          ]
        },
        "rootPath": {
          "type": "string"
        },
        "subject": {
          "type": "string"
        },
        "version": {
          "type": "string"
        }
      },
      "required": [
        "rootPath",
        "subject",
        "experiment",
        "version",
        "commitHash"
      ],
      "type": "object"
    },
    "taskLogicControl": {
      "properties": {
        "positionControl": {
          "properties": {
            "gain": {
              "$ref": "aind-vr-foraging-common.json#/definitions/vector3"
            },
            "initialPosition": {
              "$ref": "aind-vr-foraging-common.json#/definitions/vector3"
            },
            "stopResponseConfig": {
              "properties": {
                "frequencyFilterCutoff": {
                  "maximum": 100,
                  "type": "number"
                },
                "velocityThreshold": {
                  "minimum": 1,
                  "type": "number"
                }
              },
              "type": "object"
            }
          },
          "type": "object"
        },
        "virtualSiteGeneration": {
          "properties": {
            "gapSite": {
              "properties": {
                "label": {
                  "$ref": "#/definitions/siteLabel",
                  "default": "Gap"
                },
                "lengthDistribution": {
                  "$ref": "aind-vr-foraging-common.json#/definitions/truncatedExponential"
                }
              },
              "type": "object"
            },
            "interPatchSite": {
              "properties": {
                "label": {
                  "$ref": "#/definitions/siteLabel",
                  "default": "InterPatch"
                },
                "lengthDistribution": {
                  "$ref": "aind-vr-foraging-common.json#/definitions/truncatedExponential"
                }
              },
              "type": "object"
            },
            "rewardSite": {
              "properties": {
                "label": {
                  "$ref": "#/definitions/siteLabel",
                  "default": "Reward"
                },
                "lengthDistribution": {
                  "$ref": "aind-vr-foraging-common.json#/definitions/truncatedExponential"
                }
              },
              "type": "object"
            }
          },
          "required": [
            "interPatchSite",
            "rewardSite",
            "gapSite"
          ],
          "type": "object"
        }
      },
      "type": "object"
    }
  },
  "required": [
    "metadata",
    "taskLogicControl",
    "hardware",
    "environmentStatistics"
  ],
  "title": "AindVrForagingSession",
  "type": "object"
}