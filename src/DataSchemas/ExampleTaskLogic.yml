%YAML 1.1
---
# yaml-language-server: $schema=aind-vr-foraging-task.json

updaters:
  RewardDelayOffset:
    numericalUpdaterOperation: offset
    numericalUpdaterParameters:
      initialValue: 0
      increment: 5
      decrement: -2
      minimum: 0
      maximum: 200
  StopDurationOffset:
    numericalUpdaterOperation: offset
    numericalUpdaterParameters:
      initialValue: 0
      increment: 5
      decrement: -2
      minimum: 0
      maximum: 200
  StopVelocityThreshold:
    numericalUpdaterOperation: offsetPercentage
    numericalUpdaterParameters:
      initialValue: 20
      increment: 0.1
      decrement: -0.2
      minimum: 1
      maximum: 2
operationControl:
  movableSpoutControl:
    enabled: true
    timeToCollectAfterReward: 1
  taskStage: Habituation
  habituationSettings:
    distanceToReward:
      family: exponential
      exponentialParameters:
        rate: 1
        truncate:
          isTruncated: true
          max: 100
          min: 0
        scale:
          scalingParameters.scale: 1
          scalingParameters.shift: 0
    contrast: 0.5
    rewardSpecifications:
      probability: 1
      amount: 50
      operantLogic:
        isOperant: true
        stopDuration: 0
        timeToCollect: 1000000
  positionControl:
    gain:
      x: 1
      y: 1
      z: 1
    initialPosition:
      x: 0
      y: 2.56
      z: 0
    stopResponseConfig:
      frequencyFilterCutoff: 5
      velocityThreshold: 10
  odorControl:
    valveMaxOpenTime: 5.0
environmentStatistics:
  firstState: 0
  transitionMatrix:
    data:
      - [0, 1]
      - [1, 0]
  patches:
    - label: "Berries"
      stateIndex: 0
      patchRewardFunction:
        initialRewardAmount: 10000
      odorSpecifications:
        concentration: 1
        odorIndex: 0
      rewardSpecifications:
        probability: 1
        amount: 1
        delay:
          family: normal
          normalParameters:
            mean: 0
            std: 0.15
            truncate:
              isTruncated: true
              max: 0.3
              min: 0
            scale:
              scalingParameters.scale: 1
              scalingParameters.shift: 0
        operantLogic:
          isOperant: true
          stopDuration: 1
          timeToCollect: 1000000
          distanceThresholdToBeStatic: 0.1
      virtualSiteGeneration:
        gapSite:
          contrast: 0.5
          label: Gap
          lengthDistribution:
            family: exponential
            exponentialParameters:
              rate: 1
              truncate:
                isTruncated: true
                max: 100
                min: 0
              scale:
                scalingParameters.scale: 1
                scalingParameters.shift: 0
        rewardSite:
          contrast: 0.5
          label: Reward
          lengthDistribution:
            family: exponential
            exponentialParameters:
              rate: 1
              truncate:
                isTruncated: true
                max: 100
                min: 0
              scale:
                scalingParameters.scale: 1
                scalingParameters.shift: 0
        interPatchSite:
          contrast: 1
          label: "InterPatch"
          lengthDistribution:
            family: exponential
            exponentialParameters:
              rate: 1
              truncate:
                isTruncated: true
                max: 100
                min: 0
              scale:
                scalingParameters.scale: 1
                scalingParameters.shift: 0
    - label: "Bananas"
      stateIndex: 1
      patchRewardFunction:
        initialRewardAmount: 10000
      odorSpecifications:
        concentration: 1
        odorIndex: 1
      rewardSpecifications:
        probability: 1
        amount: 1
        delay:
          family: normal
          normalParameters:
            mean: 0
            std: 0.15
            truncate:
              isTruncated: true
              max: 0.3
              min: 0
            scale:
              scalingParameters.scale: 1
              scalingParameters.shift: 0
        operantLogic:
          isOperant: true
          stopDuration: 1
          timeToCollect: 1000000
          distanceThresholdToBeStatic: 0.1
      virtualSiteGeneration:
        gapSite:
          contrast: 0.5
          label: Gap
          lengthDistribution:
            family: exponential
            exponentialParameters:
              rate: 1
              truncate:
                isTruncated: true
                max: 100
                min: 0
              scale:
                scalingParameters.scale: 1
                scalingParameters.shift: 0
        rewardSite:
          contrast: 0.5
          label: Reward
          lengthDistribution:
            family: exponential
            exponentialParameters:
              rate: 1
              truncate:
                isTruncated: true
                max: 100
                min: 0
              scale:
                scalingParameters.scale: 1
                scalingParameters.shift: 0
        interPatchSite:
          contrast: 1
          label: "InterPatch"
          lengthDistribution:
            family: exponential
            exponentialParameters:
              rate: 1
              truncate:
                isTruncated: true
                max: 100
                min: 0
              scale:
                scalingParameters.scale: 1
                scalingParameters.shift: 0